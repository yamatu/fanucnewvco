services:
  # Development override: expose service ports directly and disable nginx by default.
  mysql:
    ports:
      # 3306 is often occupied on dev machines; default to 3307 on host.
      - "${MYSQL_HOST_PORT:-3307}:3306"

  backend:
    ports:
      - "${BACKEND_HOST_PORT:-8080}:8080"
    environment:
      GO_ENV: development
      GIN_MODE: debug
      # When accessing backend directly from localhost:3000 in dev, allow that Origin.
      CORS_ORIGINS: ${CORS_ORIGINS:-http://localhost:3000,http://127.0.0.1:3000}

  frontend:
    ports:
      - "${FRONTEND_HOST_PORT:-3000}:3000"

  nginx:
    profiles: ["prod"]
